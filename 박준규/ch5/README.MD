# ⚡️ 5장: 지금까지 사용하던 for 루프를 더 빠르게 할 수 있다고?

> 매일 사용하는 조건문과 반복문에서 놓치기 쉬운 성능 최적화 포인트를 알아봅니다.

---

## 🚦 1. 조건문: `if` vs `switch`

`if-else`와 `switch`는 용도에 맞게 사용해야 가독성과 성능을 모두 잡을 수 있습니다.

- **`switch`를 써야 할 때**
  - **명확한 숫자 분기**: 정해진 숫자 값에 따라 분기할 경우, `if-else if`를 길게 쓰는 것보다 `switch`의 가독성이 훨씬 좋습니다.
  - **문자열 분기**: JDK 7부터 `String` 타입으로도 `switch` 문을 사용할 수 있습니다.
- **`switch` 성능 최적화 Tip**
  - `case` 문을 **오름차순**으로 정렬하면 컴파일러 최적화에 유리하여 가장 빠른 속도를 냅니다. `case`의 개수가 많아질수록 이 효과는 더욱 커집니다.

---

## 🔄 2. 반복문: `for` 와 `while`

반복문은 애플리케이션 성능에 가장 큰 영향을 미치는 구간 중 하나입니다.

### **절대 피해야 할 실수**

- **반복문의 조건식에서 메서드를 호출하지 마세요.**
- 아래 예시에서 `list.size()`는 루프가 돌 때마다 불필요하게 계속 호출되어 성능을 저하시킵니다.

```java
// 👎 Bad: 루프마다 size() 메서드를 호출
for (int i = 0; i < list.size(); i++) {
    // ...
}

// 👍 Good: size를 변수에 미리 할당
int listSize = list.size();
for (int i = 0; i < listSize; i++) {
    // ...
}
```

> **☕️ JIT 컴파일러 이야기**
>
> 자바의 JIT(Just-In-Time) 컴파일러는 매우 똑똑해서, 실행 과정에서 아무런 작업을 하지 않는 코드를 발견하면 최적화를 위해 해당 코드를 무시하고 실행하지 않을 수도 있습니다. 성능 측정 시 이 점을 유의해야 합니다.

---

## 🎯 결론: 기본이 가장 중요하다

- **무한 루프의 위험성**: 반복문을 잘못 작성하면 **무한 루프**에 빠질 수 있습니다. 이는 애플리케이션의 응답을 멈추게 하고, 결국 스레드를 강제로 중단하거나 재시작해야 하는 심각한 성능 문제로 이어집니다.
- **쉬운 해결책**: 반대로 생각하면, 반복 구문에서 발생하는 문제점만 찾아내도 많은 성능 문제를 손쉽게 해결할 수 있습니다. 기본에 충실하는 것이 성능 튜닝의 시작입니다.
